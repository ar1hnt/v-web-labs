@import "tailwindcss";

:root {
    --bg: #f9f9fb;
    --bg-alt: #ffffff;
    --border: #e2e5ea;
    --text: #222;
    --text-light: #555;
    --primary: #2563eb;
    --primary-hover: #1d4ed8;
    --danger: #dc2626;
    --radius: 12px;
    --shadow: 0 4px 12px rgba(0,0,0,0.06);
    --transition: .18s ease;
    --font-main: 'Roboto', system-ui, sans-serif;
    --font-alt: 'Montserrat', sans-serif;
}

* { box-sizing: border-box; }

html, body { height: 100%; }

body {
    margin: 0;
    background: var(--bg);
    font-family: var(--font-main);
    color: var(--text);
    -webkit-font-smoothing: antialiased;
    min-height:100dvh;
    padding-bottom: 0;
    display:flex;
    flex-direction:column;
}

.site-header {
    background: var(--bg-alt);
    border-bottom:1px solid var(--border);
    position:fixed;
    top:0; left:0; right:0;
    z-index:60;
}

body { padding-top: 72px; }

.header-inner { 
    display: grid; 
    grid-template-columns: 160px 1fr auto;
    align-items: center; 
    gap: 1rem; 
    padding: .75rem 1.25rem; 
}

.logo {  font-weight:600; font-size:1.25rem; font-family:var(--font-alt); letter-spacing:.5px; text-decoration:none; color:var(--text); }
.logo:hover { color:var(--primary); }
.logo-icon { width:25px; height:25px; display:block; transition:color var(--transition), transform var(--transition); }
.logo:hover .logo-icon { color:var(--primary); transform:scale(1.05); }

.sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0; }
.search-area { display:flex; justify-content:center; }

.header-actions { display:flex; align-items:center; gap:.75rem; }
.search-wrapper { position: relative; width:100%; max-width:520px; }

.search-wrapper input {
    padding: .55rem .9rem .55rem 2.2rem;
    border-radius: 10px;
    border: 1px solid var(--border);
    min-width: 260px;
    width:100%;
    font-size: .9rem;
    background: #fff;
    transition: border-color var(--transition), background var(--transition);
}
.search-wrapper input:focus { outline: 2px solid var(--primary); outline-offset: 1px; }
.search-icon { position:absolute; left:.75rem; top:50%; transform:translateY(-50%); display:flex; color:var(--text-light); pointer-events:none; }
.search-wrapper input:focus + .search-icon, .search-wrapper:hover .search-icon { color:var(--primary); }
.search-wrapper input:focus { outline: 2px solid var(--primary); outline-offset: 1px; }

.icon-btn {
    position: relative;
    background: #fff;
    border: 1px solid var(--border);
    border-radius: 10px;
    cursor: pointer;
    width: 42px;
    height: 42px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.05rem;
    transition: var(--transition);
}
.icon-btn:hover { background: #f0f6ff; }
.icon-btn.active-mode { border-color: var(--primary); background: #eef3ff; }

.icon {
    width: 25px;
    height: 25px;
}

.badge {
    position: absolute;
    top: -4px;
    right: -4px;
    background: var(--primary);
    color: #fff;
    font-size: .65rem;
    padding: 2px 6px;
    border-radius: 999px;
    line-height: 1;
    min-width: 18px;
    text-align: center;
    font-weight: 500;
    box-shadow: 0 0 0 2px #fff;
}

main { padding:1rem 1.25rem 2.5rem; width:100%; flex:1 0 auto; }

#products { display:block; }
.category-title { margin:2.25rem 0 .85rem; font-size:1.15rem; font-weight:600; letter-spacing:.5px; position:relative; margin-bottom: 1.6rem; padding-bottom: 0.4rem;}
.category-title:first-child { margin-top:.5rem; }
.category-title::after { content:""; position:absolute; left:0; bottom:-6px; width:42px; height:3px; background:var(--primary); border-radius:2px; }
.products-grid { display:grid; gap:1rem; grid-template-columns: repeat(auto-fill, minmax(180px,1fr)); }

.empty { grid-column: 1/-1; padding: 2rem; text-align: center; opacity: .6; }

.product {
    background: var(--bg-alt);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: .75rem .75rem 1rem;
    display: flex;
    flex-direction: column;
    gap: .55rem;
    position: relative;
    transition: var(--transition);
    box-shadow: 0 1px 2px rgba(0,0,0,.04);
}
.product:hover { transform: translateY(-3px); box-shadow: var(--shadow); }

.image-wrap { position: relative; aspect-ratio: 1/1; overflow: hidden; border-radius: 10px; background: #eef2f5; }
.image-wrap img { width: 100%; height: 100%; object-fit: cover; display: block; }

.fav-btn {
    position: absolute;
    top: 6px;
    right: 6px;
    background: rgba(255,255,255,.9);
    border: 1px solid var(--border);
    border-radius: 50%;
    width: 34px;
    height: 34px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: .95rem;
    transition: var(--transition);
}
.fav-btn img { width: 80%; height: 80%; object-fit: contain; display:block; }
.fav-btn:hover { background: #fff; }
.fav-btn[data-fav="true"] { background: var(--danger); color: #fff; border-color: var(--danger); }
.fav-btn[data-fav="true"] img { filter: brightness(0) invert(1); }

.title { margin: .25rem 0 0; font-size: .85rem; font-weight: 500; min-height: 1.3em; line-height: 1.15; }

.prices { display: flex; gap: .5rem; align-items: baseline; }
.prices.has-discount { align-items:center; gap:.4rem; }
.discount-icon { width:16px; height:16px; object-fit:contain; display:inline-block; filter: saturate(1.1); }
.price { font-weight: 600; font-size: .95rem; color: var(--primary); }
.old-price { font-size: .7rem; color: var(--text-light); text-decoration: line-through; }

.add-to-cart {
    background: var(--primary);
    color: #fff;
    border: none;
    border-radius: 8px;
    padding: .55rem .75rem;
    cursor: pointer;
    font-size: .8rem;
    font-weight: 500;
    letter-spacing: .3px;
    transition: var(--transition);
}
.add-to-cart:hover { background: var(--primary-hover); }
.add-to-cart[data-in-cart="true"] { background: #10b981; }
.add-to-cart[data-in-cart="true"]:hover { background: #059669; }

/* Cart page */
.cart-page { display:flex; gap:1.5rem; align-items:flex-start; }
.cart-left { flex:1; gap: 1.5rem; display: grid; }
.cart-actions { display:flex; align-items:center; justify-content:space-between; background:var(--bg-alt); border:1px solid var(--border); padding:.55rem .8rem; border-radius:var(--radius); font-size:.7rem; }
.delete-selected { background:none; border:none; color:var(--danger); cursor:pointer; font-size:.7rem; font-weight:600; letter-spacing:.2px; }
.delete-selected:disabled { opacity:.4; cursor:not-allowed; }
.cart-items { display:flex; flex-direction:column; gap:.75rem; }
.cart-item { display:grid; grid-template-columns:72px 1fr 72px; gap:.75rem; background:var(--bg-alt); border:1px solid var(--border); border-radius:var(--radius); padding:.6rem .75rem; box-shadow:0 1px 2px rgba(0,0,0,.04); }
.cart-item .thumb { width:72px; height:72px; border-radius:10px; overflow:hidden; background:#eef2f5; position:relative; }
.cart-item .thumb img { width:100%; height:100%; object-fit:cover; display:block; }
.cart-item .select { position:absolute; top:6px; left:6px; width:16px; height:16px; }
.cart-item .actions { display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.45rem; }
.qty { display:flex; align-items:center; gap:.35rem; }
.qty button { width:26px; height:26px; border-radius:8px; background:#fff; border:1px solid var(--border); cursor:pointer; font-size:.85rem; line-height:1; font-weight:600; }
.qty button:hover { background:#f2f5f9; }
.cart-summary { width:280px; background:var(--bg-alt); border:1px solid var(--border); border-radius:var(--radius); padding:.9rem .95rem 1.1rem; position:sticky; top:88px; display:flex; flex-direction:column; gap:1rem; box-shadow:0 2px 6px rgba(0,0,0,.05); }
.summary-row { display:flex; justify-content:space-between; font-size:.75rem; margin-top:.15rem; }
.summary-row.total { font-weight:600; font-size:.85rem; margin-top:.5rem; }
.pay-btn { width:100%; background:var(--primary); border:none; color:#fff; padding:.6rem .85rem; border-radius:10px; font-weight:600; letter-spacing:.35px; cursor:pointer; font-size:.75rem; }
.pay-btn:hover { background:var(--primary-hover); }
.discount { color:var(--danger); font-weight:600; }
.small-btn { background:#fff; border:1px solid var(--border); border-radius:10px; width:34px; height:34px; display:flex; align-items:center; justify-content:center; font-size:.95rem; cursor:pointer; transition:var(--transition); }
.small-btn:hover { background:#f0f6ff; }
.cart-item .actions .fav-btn { position:static; width:34px; height:34px; border-radius:10px; }

/* Search results dropdown */
.search-results { position:absolute; left:0; right:0; top:100%; margin-top:.4rem; background:#fff; border:1px solid var(--border); border-radius:12px; padding:.35rem 0 .4rem; box-shadow:var(--shadow); max-height:320px; overflow:auto; z-index:70; }
.search-result-item { display:flex; align-items:center; gap:.6rem; padding:.45rem .75rem; font-size:.7rem; line-height:1.2; }
.search-result-item:hover { background:#f5f9ff; }
.search-result-item .thumb { width:42px; height:42px; object-fit:cover; border-radius:8px; background:#eef2f5; }
.s-title { flex:1; font-weight:500; font-size:.7rem; }
.search-result-item .fav-btn { position:static; width:28px; height:28px; border-radius:8px; padding:0; }
.search-result-item .fav-btn img { width:70%; height:70%; }
.search-result-item .add-to-cart { padding:.3rem .5rem; font-size:.7rem; border-radius:8px; }

footer {
    padding: 1.25rem 1rem;
    background: var(--bg-alt);
    border-top: 1px solid var(--border);
    text-align: center;
    display: flex;
    font-size: .7rem;
    gap: 1.25rem;
    align-items: center;
    flex-wrap: wrap;
    justify-content: center;
    color: var(--text-light);
    flex-shrink:0; 
}
.mobile-bar {
    display:none;
    position:fixed;
    bottom:0; left:0; right:0;
    background:var(--bg-alt);
    border-top:1px solid var(--border);
    justify-content:space-around;
    padding:.4rem .5rem calc(.4rem + env(safe-area-inset-bottom));
    z-index:40;
}
.m-item {
    background:none; border:none; position:relative; font-size:1.25rem; cursor:pointer; display:flex; align-items:center; justify-content:center; width:64px; height:48px; border-radius:14px; transition:var(--transition); color:var(--text);
}
.m-item:active, .m-item:hover { background:#f0f4fa; }
.m-item.active { background:var(--primary); color:#fff; }
.m-badge { position:absolute; top:4px; right:10px; background:var(--primary); color:#fff; font-size:.55rem; padding:2px 5px; border-radius:999px; line-height:1; min-width:16px; text-align:center; }
.icon-wrap { line-height:1; }

[hidden] { display: none !important; }

@media (max-width: 640px), (max-width: 780px) and (pointer: coarse) {
    .header-inner { grid-template-columns:1fr; }
    .home-btn { display:none !important; }
    .header-actions { display:none; }
    .search-area { grid-column:1/-1; order:1; }
    .search-wrapper { max-width:100%; }
    .search-wrapper input { width:100%; min-width:0; }
    .mobile-bar { display:flex; }
    .m-item.active img { filter: brightness(0) invert(1); }
    .icon-btn.active-mode img { filter: brightness(0) invert(1); }
    .icon-btn.home-active { border-color: var(--primary); background:#eef3ff; }
    .icon-btn.home-active img { filter: brightness(0) invert(1); }
    main { padding-bottom:3.5rem; }
    .category-title { font-size:1.05rem; }
    footer { padding-bottom: 5rem; font-size:.65rem; align-items: center;}
}
@media (hover: none) { .product:hover { transform: none; } }